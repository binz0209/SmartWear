@using System.Linq
@model SmartWear.ViewModels.HomeViewModel
@{
    ViewData["Title"] = "Home Page";
}

@functions {
    public static string ToVnd(decimal price)
    {
        return price.ToString("#,0") + " VND";
    }
}

<body class="index-page">
    <main class="main">
        <!-- Hero Section -->
        <section class="ecommerce-hero-2 hero section" id="hero">
            <div class="container">
                <div class="hero-slider swiper init-swiper" data-aos="fade-up">
                    <script type="application/json" class="swiper-config">
                        {
                          "loop": true,
                          "speed": 800,
                          "autoplay": {
                            "delay": 5000
                          },
                          "effect": "fade",
                          "fadeEffect": {
                            "crossFade": true
                          },
                          "navigation": {
                            "nextEl": ".swiper-button-next",
                            "prevEl": ".swiper-button-prev"
                          }
                        }
                    </script>
                    <div class="swiper-wrapper">
                        <!-- New Collection Slide -->
                        <div class="swiper-slide slide-new">
                            <div class="row align-items-center">
                                <div class="col-lg-6 content-col" data-aos="fade-right" data-aos-delay="100">
                                    <div class="slide-content">
                                        <span class="slide-badge">New Arrivals</span>
                                        <h1>Discover Our <span>Latest</span> Collection</h1>
                                        <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Proin eget tortor risus. Vivamus magna justo, lacinia eget consectetur sed, convallis at tellus.</p>
                                        <div class="slide-cta">
                                            <a href="#" class="btn btn-shop">Shop New Arrivals <i class="bi bi-arrow-right"></i></a>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-lg-6 image-col" data-aos="fade-left" data-aos-delay="200">
                                    <div class="product-showcase">
                                        <div class="product-grid">
                                            <div class="product-item" data-aos="fade-up" data-aos-delay="300">
                                                <div class="product-image">
                                                    <img src="~/img/product/product-1.webp" alt="New Product 1">
                                                </div>
                                                <div class="product-info">
                                                    <h4>Modern Style</h4>
                                                    <span class="price">79,990 VND</span>
                                                </div>
                                            </div>
                                            <div class="product-item" data-aos="fade-up" data-aos-delay="400">
                                                <div class="product-image">
                                                    <img src="~/img/product/product-2.webp" alt="New Product 2">
                                                </div>
                                                <div class="product-info">
                                                    <h4>Casual Collection</h4>
                                                    <span class="price">64,990 VND</span>
                                                </div>
                                            </div>
                                            <div class="product-item" data-aos="fade-up" data-aos-delay="500">
                                                <div class="product-image">
                                                    <img src="~/img/product/product-6.webp" alt="New Product 3">
                                                </div>
                                                <div class="product-info">
                                                    <h4>Premium Design</h4>
                                                    <span class="price">89,990 VND</span>
                                                </div>
                                            </div>
                                            <div class="product-item" data-aos="fade-up" data-aos-delay="600">
                                                <div class="product-image">
                                                    <img src="~/img/product/product-7.webp" alt="New Product 4">
                                                </div>
                                                <div class="product-info">
                                                    <h4>Elegant Series</h4>
                                                    <span class="price">74,990 VND</span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Sale Products Slide -->
                        <div class="swiper-slide slide-sale">
                            <div class="row align-items-center">
                                <div class="col-lg-6 content-col" data-aos="fade-right" data-aos-delay="100">
                                    <div class="slide-content">
                                        <span class="slide-badge">Limited Time</span>
                                        <h1>Season <span>Sale</span> Up To 50% Off</h1>
                                        <p>Curabitur aliquet quam id dui posuere blandit. Nulla quis lorem ut libero malesuada feugiat. Mauris blandit aliquet elit, eget tincidunt nibh pulvinar.</p>
                                        <div class="slide-cta">
                                            <a href="#" class="btn btn-shop">Shop Sale <i class="bi bi-arrow-right"></i></a>
                                        </div>
                                        <div class="countdown-container">
                                            <div class="countdown-label">Offer ends in:</div>
                                            <div class="countdown d-flex" data-count="2025/6/15">
                                                <div>
                                                    <h3 class="count-days"></h3>
                                                    <h4>Days</h4>
                                                </div>
                                                <div>
                                                    <h3 class="count-hours"></h3>
                                                    <h4>Hours</h4>
                                                </div>
                                                <div>
                                                    <h3 class="count-minutes"></h3>
                                                    <h4>Minutes</h4>
                                                </div>
                                                <div>
                                                    <h3 class="count-seconds"></h3>
                                                    <h4>Seconds</h4>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-lg-6 image-col" data-aos="fade-left" data-aos-delay="200">
                                    <div class="sale-showcase">
                                        <div class="main-product">
                                            <img src="~/img/product/product-8.webp" alt="Sale Product">
                                            <div class="discount-badge">
                                                <span class="percent">50%</span>
                                                <span class="text">OFF</span>
                                            </div>
                                        </div>
                                        <div class="floating-tag" data-aos="zoom-in" data-aos-delay="300">
                                            <div class="tag-content">
                                                <span class="tag-label">Best Seller</span>
                                                <span class="tag-price">
                                                    <span class="old-price">129,990 VND</span>
                                                    <span class="new-price">64,990 VND</span>
                                                </span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Featured Products Slide -->
                        <div class="swiper-slide slide-featured">
                            <div class="row align-items-center">
                                <div class="col-lg-6 content-col" data-aos="fade-right" data-aos-delay="100">
                                    <div class="slide-content">
                                        <span class="slide-badge">Featured Collection</span>
                                        <h1>Premium <span>Quality</span> Products</h1>
                                        <p>Vestibulum ac diam sit amet quam vehicula elementum sed sit amet dui. Donec rutrum congue leo eget malesuada. Cras ultricies ligula sed magna dictum porta.</p>
                                        <div class="slide-cta">
                                            <a href="#" class="btn btn-shop">Explore Collection <i class="bi bi-arrow-right"></i></a>
                                        </div>
                                        <div class="feature-list">
                                            <div class="feature-item">
                                                <i class="bi bi-check-circle-fill"></i>
                                                <span>Premium Materials</span>
                                            </div>
                                            <div class="feature-item">
                                                <i class="bi bi-check-circle-fill"></i>
                                                <span>Handcrafted Quality</span>
                                            </div>
                                            <div class="feature-item">
                                                <i class="bi bi-check-circle-fill"></i>
                                                <span>Lifetime Warranty</span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-lg-6 image-col" data-aos="fade-left" data-aos-delay="200">
                                    <div class="featured-showcase">
                                        <div class="featured-image">
                                            <img src="~/img/product/product-9.webp" alt="Featured Product">
                                            <div class="featured-badge">
                                                <i class="bi bi-star-fill"></i>
                                                <span>Featured</span>
                                            </div>
                                        </div>
                                        <div class="floating-review" data-aos="fade-up" data-aos-delay="300">
                                            <div class="review-stars">
                                                <i class="bi bi-star-fill"></i>
                                                <i class="bi bi-star-fill"></i>
                                                <i class="bi bi-star-fill"></i>
                                                <i class="bi bi-star-fill"></i>
                                                <i class="bi bi-star-fill"></i>
                                            </div>
                                            <div class="review-text">
                                                "Exceptional quality and design"
                                            </div>
                                            <div class="review-author">
                                                - Satisfied Customer
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="swiper-button-prev"></div>
                    <div class="swiper-button-next"></div>
                </div>
            </div>
        </section><!-- /Hero Section -->
        <!-- Welcome Section -->
        <section id="best-sellers" class="best-sellers section">
            <div class="container section-title" data-aos="fade-up">
                <h2>Welcome</h2>
            </div>
        </section>
        <!-- Product List Section -->
        <section id="product-list" class="product-list section">
            <div class="container isotope-layout" data-aos="fade-up" data-aos-delay="100" data-default-filter="*" data-layout="masonry" data-sort="original-order">

                <div class="row">
                    <div class="col-12">
                        <div class="product-filters isotope-filters mb-5 d-flex justify-content-center" data-aos="fade-up">
                            <ul class="d-flex flex-wrap gap-2 list-unstyled">
                                <li class="filter-btn filter-active" data-filter="*">All</li>
                                <li class="filter-btn" data-filter=".man">Man</li>
                                <li class="filter-btn" data-filter=".women">Women</li>
                                <li class="filter-btn" data-filter=".kid">Kid</li>
                            </ul>
                        </div>
                    </div>
                </div>

                <div class="row product-container isotope-container" data-aos="fade-up" data-aos-delay="200">

                    @foreach (var product in Model.AllProducts)
                    {
                        var categoryClass = product.CategoryName?.ToLower().Replace(" ", "-") ?? "uncategorized";
                        <div class="col-md-6 col-lg-3 product-item isotope-item @categoryClass">
                            <div class="product-card">
                                <div class="product-image">
                                    @if (!string.IsNullOrEmpty(product.ImageUrl))
                                    {
                                        <img src="@product.ImageUrl" alt="@product.Name" class="img-fluid main-img">
                                    }
                                    else
                                    {
                                        <img src="~/img/product/default-product.webp" alt="Default Product Image" class="img-fluid main-img">
                                    }

                                </div>
                                <div class="product-info">
                                    <h5 class="product-title"><a href="@Url.Action("ProductDetails", "Product", new { id = product.Id })">@product.Name</a></h5>
                                    <div class="product-price">
                                        <span class="current-price">@ToVnd(product.Price)</span>
                                    </div>
                                    <div class="product-rating">
                                        @for (int i = 0; i < product.Rating; i++)
                                        {
                                            <i class="bi bi-star-fill"></i>
                                        }
                                        @for (int i = product.Rating; i < 5; i++)
                                        {
                                            <i class="bi bi-star"></i>
                                        }
                                        <span> (@product.ReviewCount)</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    }


                </div>

                <div class="text-center mt-5" data-aos="fade-up">
                    <a href="/Product/Category" class="view-all-btn">View All Products <i class="bi bi-arrow-right"></i></a>
                </div>

            </div>

        </section><!-- /Product List Section -->

    </main>
    <!-- Scroll Top -->
    <a href="#" id="scroll-top" class="scroll-top d-flex align-items-center justify-content-center"><i class="bi bi-arrow-up-short"></i></a>

    <!-- Preloader -->
    <div id="preloader"></div>

    <!-- Vendor JS Files -->
    <script src="~/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>
    <script src="~/vendor/php-email-form/validate.js"></script>
    <script src="~/vendor/swiper/swiper-bundle.min.js"></script>
    <script src="~/vendor/aos/aos.js"></script>
    <script src="~/vendor/imagesloaded/imagesloaded.pkgd.min.js"></script>
    <script src="~/vendor/isotope-layout/isotope.pkgd.min.js"></script>
    <script src="~/vendor/glightbox/js/glightbox.min.js"></script>
    <script src="~/vendor/drift-zoom/Drift.min.js"></script>
    <script src="~/vendor/purecounter/purecounter_vanilla.js"></script>

    <!-- Main JS File -->
    <script src="~/js/main.js"></script>

    <script>
        document.addEventListener("DOMContentLoaded", function () {
            var $grid = $('.isotope-container').isotope({
                itemSelector: '.isotope-item',
                layoutMode: 'masonry'
            });

            $('.filter-btn').on('click', function () {
                $('.filter-btn').removeClass('filter-active');
                $(this).addClass('filter-active');
                var filterValue = $(this).attr('data-filter');
                $grid.isotope({ filter: filterValue });
            });
        });
    </script>
</body>
